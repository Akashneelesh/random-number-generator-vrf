---
phase: 03-frontend-integration
plan: 03
type: execute
---

<objective>
Build user interface for random number generation with input validation, loading states, transaction execution, and result display.

Purpose: Complete the frontend by creating the form UI for entering range parameters, triggering VRF transactions, and displaying the generated random number results.
Output: Fully functional UI where users can input min/max values, execute VRF transactions, and view results fetched from the contract.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-frontend-integration/03-01-SUMMARY.md
@.planning/phases/03-frontend-integration/03-02-SUMMARY.md
@contract/src/random_range_generator.cairo

**Contract interface:**
- generate_random_in_range(min: u128, max: u128) -> u128 (write function)
- get_last_random_number() -> (u128, u128, u128) (read function, returns value/min/max tuple)

**Tech stack:**
- React hooks for state management
- useVrfTransaction from previous plan for transaction execution
- useContract from @starknet-react/core for contract reads
- CallData for encoding contract calls

**UX requirements from PROJECT.md:**
- Input validation: min < max
- Loading states during transaction
- Result display fetched via contract read
- Clear error messages
- Simple, clean UI (reference template quality)

**Patterns to follow:**
- Disable inputs during transaction loading
- Show transaction hash as link to Sepolia explorer
- Poll for result after transaction confirmed (or use event subscription if available)
- Handle case where user has no last result (first-time user)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create random number generation form component</name>
  <files>frontend/src/components/RandomNumberForm.tsx</files>
  <action>Create frontend/src/components/RandomNumberForm.tsx. Import useState, useAccount from @starknet-react/core, useVrfTransaction from hooks/useVrfTransaction. Component state: min (number), max (number), localError (string). Form with: (1) Two number inputs for min/max with labels "Minimum" and "Maximum"; (2) Submit button "Generate Random Number" disabled if wallet not connected OR loading OR min >= max; (3) Display localError if min >= max ("Minimum must be less than maximum"); (4) On submit: validate min < max, call executeVrfCall(min, max) from hook, clear inputs on success; (5) Show loading state: disable button, show "Generating..." text; (6) Display transaction hash from hook with link to https://sepolia.voyager.online/tx/{txHash} if txHash exists; (7) Show error from hook.error if present. Use semantic HTML (form element, labels, type="number" inputs). Basic CSS: flexbox for layout, padding/margins, border on inputs, button styling (blue bg when enabled, gray when disabled), error text in red. Add min/max input attributes: min="0" to prevent negative numbers. Default values: min=1, max=100 as placeholder example.</action>
  <verify>Component renders form, inputs accept numbers, validation works (min >= max disables button), submit triggers executeVrfCall, loading state shows, transaction hash link appears on success</verify>
  <done>Form component functional: input validation, loading states, transaction execution integrated, txHash displays with explorer link</done>
</task>

<task type="auto">
  <name>Task 2: Create result display component</name>
  <files>frontend/src/components/ResultDisplay.tsx, frontend/src/hooks/useContractRead.ts</files>
  <action>Create frontend/src/hooks/useContractRead.ts. Import useState, useEffect, useAccount, useContract from @starknet-react/core, RANDOM_RANGE_GENERATOR_ADDRESS and RandomRangeGeneratorAbi from contracts. Implement useLastRandomNumber hook: (1) Use useContract with { abi: RandomRangeGeneratorAbi, address: RANDOM_RANGE_GENERATOR_ADDRESS }; (2) State: result { value: number, min: number, max: number } | null, loading: boolean; (3) fetchResult function calling contract.get_last_random_number(); (4) useEffect to fetch on mount and when account changes; (5) Return { result, loading, refetch: fetchResult }. Create ResultDisplay.tsx importing the hook. Display: (1) If loading: "Loading result..."; (2) If no result (null or value === 0): "No random number generated yet. Connect wallet and generate your first random number!"; (3) If result exists: Show in card/box: "Last Generated Random Number: {value}" with subtitle "Range: {min} - {max}". Add refresh button calling refetch(). Use simple card styling: border, padding, background color. Add prop refreshTrigger?: number to useEffect deps to allow parent to trigger refresh after transaction.</action>
  <verify>Component displays "No result" message for new users, shows result after generation, refresh button updates display, loading state works</verify>
  <done>Result display shows last random number from contract storage, handles no-result case, provides manual refresh</done>
</task>

<task type="auto">
  <name>Task 3: Integrate components in main App</name>
  <files>frontend/src/App.tsx, frontend/src/App.css</files>
  <action>Update App.tsx to compose full UI: (1) Import WalletConnect, RandomNumberForm, ResultDisplay; (2) Layout structure: header with title "VRF Random Range Generator" + subtitle "Cryptographically secure random numbers on Starknet", WalletConnect at top right of header, main section with ResultDisplay above RandomNumberForm (show current result before generating new one), footer with link to GitHub or docs; (3) Pass txHash state from RandomNumberForm to trigger ResultDisplay refresh (use key or refresh prop); (4) Add simple CSS in App.css: max-width container (600px), centered layout, spacing between sections, professional color scheme (dark blue header, white background, subtle shadows on cards). Use flexbox for responsive layout. Add info banner explaining VRF: "This demo uses Cartridge VRF to generate verifiable random numbers within your specified range. Each transaction generates a unique random number." Make UI clean and documentation-quality (this is a reference template).</action>
  <verify>npm run dev shows complete UI: header with wallet connection, explanation banner, result display, input form, all components styled and functional</verify>
  <done>App integrates all components with clean layout, result refreshes after transaction, UI is reference-template quality</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete VRF random number generator UI</what-built>
  <how-to-verify>
    1. Run: cd frontend && npm run dev
    2. Visit: http://localhost:5173
    3. Connect wallet (Argent X or Braavos with Sepolia testnet)
    4. Verify initial state: "No random number generated yet" message displays
    5. Enter min: 1000, max: 1300 in form
    6. Click "Generate Random Number"
    7. Approve transaction in wallet extension
    8. Verify: Loading state shows "Generating..."
    9. Verify: Transaction hash appears with link to Voyager
    10. Wait for transaction confirmation (~10-30 seconds)
    11. Verify: Result display updates automatically showing random number between 1000-1300
    12. Try invalid input: min: 100, max: 50
    13. Verify: Button disabled, error message shows "Minimum must be less than maximum"
    14. Click refresh button in result display
    15. Verify: Result re-fetches from contract (should match previous value)
    16. Check console: no errors or warnings
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds with no errors
- [ ] Form validation works (min < max enforcement)
- [ ] Transaction execution triggers VRF multicall
- [ ] Result display fetches from contract storage
- [ ] Loading states and error handling work
- [ ] UI is clean and reference-template quality
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Users can input range, generate random number, view result
- Form validation prevents invalid ranges
- Result fetches from contract after transaction
- UI is polished and suitable for reference template
- Phase 3 complete, ready for deployment in Phase 4
</success_criteria>

<output>
After completion, create `.planning/phases/03-frontend-integration/03-03-SUMMARY.md`:

# Phase 03-03: UI Components & Result Display Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 3 complete. Ready for Phase 4: Deployment & Verification.
</output>
